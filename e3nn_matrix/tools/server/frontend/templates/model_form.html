<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link type="text/css" href="/static/styles/styles.css" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/static/javascript/form.js"></script>
</head>
<body>
    <div class="flex h-screen bg-stone-200">
        {% include 'navbar.html' %}
        <div class="flex-1 flex">
        <div class="w-1/2 px-8 py-6 overflow-y-auto bg-stone-100 m-4 rounded-lg">
            <div class="px-4 sm:px-0">
            <h3 class="text-xl font-semibold leading-7 text-gray-900">Model information</h3>
            <p class="mt-1 max-w-2xl text-sm leading-6 text-gray-500">This is the information of the model</p>
            </div>
            <div class="mt-6 ">
            <dl class="divide-y divide-gray-200">
                <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0">
                <dt class="text-sm font-medium leading-6 text-gray-900">Model name</dt>
                <dd class="mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0">{{ model_name }}</dd>
                </div>
                <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0">
                <dt class="text-sm font-medium leading-6 text-gray-900">Description</dt>
                <dd class="mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0">{{ model.description }}</dd>
                </div>
                <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0">
                    <dt class="text-sm font-medium leading-6 text-gray-900">Authors</dt>
                    <dd class="mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0">
                        <ul>
                            {% for author in model.authors %}
                            <li>{{ author }}</li>
                            {% endfor %}
                        </ul>
                    </dd>
                </div>
                <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0">
                <dt class="text-sm font-medium leading-6 text-gray-900">Data properties</dt>
                <dd class="mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0">
                    <ul>
                        <li>Symmetric matrix: {{ model.data_processor.symmetric_matrix }}</li>
                        <li>Subtract point contributions: {{ model.data_processor.sub_point_matrix }}</li>
                        <li>Matrix type: {{ model.data_processor.out_matrix }}</li>
                    </ul>
                </dd>
                </div>
                <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0">
                    <dt class="text-sm font-medium leading-6 text-gray-900">Basis</dt>
                    <dd class="mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0">
                        <ul>
                            {% for point_basis in model.data_processor.basis_table.basis %}
                                <li>{{ point_basis }}</li>
                            {% endfor %}
                        </ul>
                    </dd>
                </div>
                <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0">
                    <dt class="text-sm font-medium leading-6 text-gray-900">Test metrics summary</dt>
                    <dd class="mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0">
                        {{ model.test_metrics_summary | safe }}
                    </dd>
                </div>
                <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0">
                <dt class="text-sm font-medium leading-6 text-gray-900">Files</dt>
                <dd class="mt-2 text-sm text-gray-900 sm:col-span-2 sm:mt-0">
                    <ul role="list" class="divide-y divide-gray-200 rounded-md border border-gray-200">
                    {% for file in model.files.keys() %}
                    <li class="flex items-center justify-between py-4 pl-4 pr-5 text-sm leading-6">
                        <div class="flex w-0 flex-1 items-center">
                        <svg class="h-5 w-5 flex-shrink-0 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                            <path fill-rule="evenodd" d="M15.621 4.379a3 3 0 00-4.242 0l-7 7a3 3 0 004.241 4.243h.001l.497-.5a.75.75 0 011.064 1.057l-.498.501-.002.002a4.5 4.5 0 01-6.364-6.364l7-7a4.5 4.5 0 016.368 6.36l-3.455 3.553A2.625 2.625 0 119.52 9.52l3.45-3.451a.75.75 0 111.061 1.06l-3.45 3.451a1.125 1.125 0 001.587 1.595l3.454-3.553a3 3 0 000-4.242z" clip-rule="evenodd" />
                        </svg>
                        <div class="ml-4 flex min-w-0 flex-1 gap-2">
                            <span class="truncate font-medium">{{ file }}</span>
                            <!-- <span class="flex-shrink-0 text-gray-400">2.4mb</span> -->
                        </div>
                        </div>
                        <div class="ml-4 flex-shrink-0">
                        <a download href="/api/models/{{ model_name }}/files/{{ file }}" class="font-medium text-teal-600 hover:text-teal-500">Download</a>
                        </div>
                    </li>
                    {% endfor %}
                    </ul>
                </dd>
                </div>
            </dl>
            </div>
        </div>

        <div class="px-4 py-6  w-1/2 bg-stone-100 my-4 mr-4 rounded-lg">
        <form id="form" method="post" action="/api/models/{{model_name}}/predict" enctype="multipart/form-data" onsubmit="formSubmit(event)" onreset="formReset(event)">
            <div class="px-4">
            <div class="pb-6">
                <h2 class="text-xl font-semibold leading-7 text-gray-900">Prediction form</h2>
                <p class="mt-1 text-sm leading-6 text-gray-600">Use this form to receive predictions for your structures.</p>
        
                <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
                    <div class="col-span-full" ondrop="fileDrop(event)" ondragover="fileDrag(event)" ondragleave="fileDragLeave(event)">
                        <label for="cover-photo" class="block text-sm font-medium leading-6 text-gray-900">Upload your structure</label>
                        <div class="mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10">
                        <div class="text-center">
                            <svg class="mx-auto h-12 w-12 text-gray-300" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                            <path fill-rule="evenodd" d="M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z" clip-rule="evenodd" />
                            </svg>
                            <div class="mt-4 flex text-sm leading-6 text-gray-600">
                            <label for="geometry_file" class="relative cursor-pointer rounded-md font-semibold text-teal-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-teal-500">
                                <span>Upload a file</span>
                                <input id="geometry_file" name="geometry_file" type="file" onchange="javascript:updateFileNames()" class="sr-only">
                            </label>
                            <p class="pl-1">or drag and drop</p>
                            </div>
                            <p class="text-xs leading-5 text-gray-600">Any file that sisl can parse into a geometry.</p>
                        </div>
                        </div>
                        <p id="uploaded_file" class="mt-1 max-w-2xl text-sm leading-6 text-gray-500">No file selected.</p>
                    </div>
                
                </div>
                
            </div>
        
            <div class="mt-6 flex items-center justify-end gap-x-6">
            <button type="reset" class="text-sm font-semibold leading-6 text-gray-900">Clear</button>
            <button id="submit_button" type="submit" class="rounded-md bg-teal-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-teal-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:opacity-25">Predict</button>
            </div>
            </form>

            <div id="loading" class="hidden flex justify-center w-full py-8">
                <div
                class=" h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-r-transparent align-[-0.125em] text-success motion-reduce:animate-[spin_1.5s_linear_infinite]"
                role="status">
                <span
                    class="!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]"
                    >Loading...</span
                >
                </div>
            </div>

            <div id="error" class="hidden flex justify-center w-full py-8">
                <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert">
                    <strong class="font-bold">Error:</strong>
                    <span id="error_message" class="block sm:inline"></span>
                </div>
            </div>

            </div>
        </div>
    </div>
</body>
</html>

